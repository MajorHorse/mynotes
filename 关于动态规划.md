# 前言

最近一段时间刷的算法题，很多都是关于动态规划相关的。其中，包括上次做的两道阿里笔试题，当时我绞尽脑汁想了一个小时都没有想出一个合适的解法 ，更不必说把代码给码出来并调试成功了。笔试结束后，又看了一些相关的文档，都说动态规划是几乎所有大厂考试的必考题。看着题目中熟悉又陌生的0-1背包问题等等题目，忽然又想起来研一时选修了算法分析与设计和最优化这两门课，这两门课讲的就有动态规划相关的问题。唉，当年太年轻，只想着玩，这门课也没咋听。到头来，还是得自己一点点给补起来，真是天道好轮回啊.......

# 定义

动态规划（Dynamic Programming，DP）是运筹学的一个分支，是求解决策过程最优化的过程。按照定义，动态规划是把一个复杂的大问题拆解成一堆简单的小问题，有点像对问题进行一个庖丁解牛的过程。核心点在于，这些小问题一定是能够被重复调用的。能够被重复调用这点很重要，我把它理解为解DP问题的终点。刚开始看相关文档时，我觉得DP问题本质上就是递归呀：大问题拆解为可被重复执行的子问题。后面又看了更多的案例后，才意识到递归虽好，但是在解决实际问题时往往会遇到时间复杂度过高的情况。也就是说，递归解决问题时的简洁只是相对于编码者的编码而言的，在实际过程中，由于层层嵌套的调用，导致效率异常低下，还不如不递归呢。所以，这也是导致DP出现的一个重要原因之一。那么，DP又是怎样解决重复运算导致的时间复杂度过低的问题的呢？很简单，引入一个数来存储已经算出来值就行了。换句话说，这就是典型的以空间换时间。

# 解法

### 1.建立动态转移方程

这是解决DP问题的第一步，往往也是最难的一步。我觉得知乎上面一位答主写的自己对于DP的理解非常棒：DP本质上跟中学时做的数列求解问题是一样的。细想一下，确实如此。在求解数列问题时，我们要找到一个可以代表其规律的通式，这个通式的求解是最难的，也是最为耗费时间的。找到通式后，再把想要求解的某一位代进去即可。求解DP问题的过程也是如此，一定要先找到那个可以概括问题的动态转移方程。这一步没啥规律可将，只能是见得多了自然就知道了。核心在于，当做已经知道了f(1)~f(n-1)的值，然后想办法利用它们求得f(n)。

### 2.缓存并复用以往结果

这一步也就是削减时间复杂度的核心，很重要。如果处理的不够恰当，就达不到 以空间换时间 的目的。简单来讲，这一步就是传统递归过程的改进版。

### 3.按顺序从小往大算

这一步要求我们从f(0)、f(1)、......f(n)依次计算。因为有了第二步，这就要求我们必须从小往大一步一步来，不断缓存每一步计算的结果，同时把这个结果为下一步所用，最终求解得到f(n)。

# 案例-斐波那契数列

题目描述：0,1,1,2,3,5,8,13,21......求第n项。

我们可以显而易见的看到，斐波那契数列的规律就是当前值为前两个值的和。所以，我们可以很容易就得到状态转移方程：f(n)=f(n-1)+f(n-2)。接下来重点比较下递归和DP的解法区别：

```java
public class FibDPDemo {
    //用普通递归的方式求斐波那契数列
    //缺点：时间复杂度过高，成指数级增长。以f(5)为例，计算它时要计算f(3)和f(4),计算f(4)时又需要计算
    //     f(3)和f(2),这样就导致了f(3)的重复计算，因此时间复杂度过高。
    public static int fib(int n){
        if (n<2) {
            return n;
        }else{
            return fib(n-1)+fib(n-2);
        }
    }
    //用DP解，以空间换时间
    public static int fibUseDP(int n){
        if (n<1) {
            return n;
        }
        //f(n-1)的值
        int last=1;
        //f(n-2)的值
        int second=1;
        //f(n)的值
        int answer=1;
        for (int i = 3; i <= n; i++) {
            //f(n)=f(n-1)+f(n-2)
            answer=last+second;
            //f(n-1)和f(n-2)依次往后移一位
            second=last;
            last=answer;
        }
        return answer;
    }

    public static void main(String[] args) {
        System.out.println(fib(5));//5
        System.out.println(fibUseDP(5));//5
    }
}
```